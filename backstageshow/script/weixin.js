/**
 * Created by 5 on 2017/12/28.
 */

var body = new Vue({
    el:'#body',
    data:{
        type:'comment',
        comment:{
            status:1,
            nowpage:1,
            showpages:100,
            allnum:3,
            list:[
                {
                    id:1,
                    select:0,
                    comment:"Swift 有类似 Python 的易用性，有比较强行弥补了 Objective-C 哪些不足？ 融合了哪些其他语言的优秀特性？将它和 C#相比各有什么优劣？它会未来的件开发产生什么影响？作为一个程序员，此刻，一个对世界费的语言，所有人所有所作为一个程序员，此刻，一个对世，所有人所有所作为一个程序员，此刻，一个对世，所有人所有所作为一个程序员，此刻，一个对世，所有人所有所作为一个程序员，此刻，一个对世，所有人所有所作为一个程序员，此刻，一个对世，所有人所有所作为一个程序员，此刻，一个对世，所有人所有所作为一个程序员，此刻，一个对世，所有人所有所作为一个程序员，此刻，一个对世界费的语言，所有人所有所有人都是0基础你有什么想你有什么想你有什么想法？",
                    imgs:[
                        {
                            url:"https://ss3.baidu.com/-rVXeDTa2gU2pMbgoY3K/it/u=331642910,199523927&fm=202&mola=new&crop=v1",
                            id:1
                        },
                        {
                            url:"https://ss3.baidu.com/-rVXeDTa2gU2pMbgoY3K/it/u=3252315444,1227221520&fm=202&mola=new&crop=v1",
                            id:2
                        },
                        {
                            url:"https://ss3.baidu.com/-rVXeDTa2gU2pMbgoY3K/it/u=111754562,621043109&fm=202&mola=new&crop=v1",
                            id:3
                        }
                    ],
                    username:"呵呵呵呵",
                    time:"2017/10/13 16:17:04",
                    status:1,
                    userimg:"https://ss3.baidu.com/-rVXeDTa2gU2pMbgoY3K/it/u=331642910,199523927&fm=202&mola=new&crop=v1"
                },
                {
                    id:2,
                    select:0,
                    comment:"Swift 有类似 Python 的易用性，有比较强行弥补了 Objective-C 哪些不足？ 融合了哪些其他语言的优秀特性？将它和 C#相比各有什么优劣？它会未来的件开发产生什么影响？作为一个程序员，此刻，一个对世界费的语言，所有人所有所作为一个程序员，此刻，一个对世，所有人所有所作为一个程序员，此刻，一个对世，所有人所有所作为一个程序员，此刻，一个对世，所有人所有所作为一个程序员，此刻，一个对世，所有人所有所作为一个程序员，此刻，一个对世，所有人所有所作为一个程序员，此刻，一个对世，所有人所有所作为一个程序员，此刻，一个对世，所有人所有所作为一个程序员，此刻，一个对世界费的语言，所有人所有所有人都是0基础你有什么想你有什么想你有什么想法？",
                    imgs:[],
                    username:"呵呵呵呵",
                    time:"2017/10/13 16:00:00",
                    status:2,
                    userimg:"https://ss3.baidu.com/-rVXeDTa2gU2pMbgoY3K/it/u=3252315444,1227221520&fm=202&mola=new&crop=v1"
                },
                {
                    id:3,
                    select:0,
                    comment:"Swift 有类似 Python 的易用性，有比较强行弥补了 Objective-C 哪些不足？ 融合了哪些其他语言的优秀特性？将它和 C#相比各有什么优劣？它会未来的件开发产生什么影响？作为一个程序员，此刻，一个对世界费的语言，所有人所有所作为一个程序员，此刻，一个对世，所有人所有所作为一个程序员，此刻，一个对世，所有人所有所作为一个程序员，此刻，一个对世，所有人所有所作为一个程序员，此刻，一个对世，所有人所有所作为一个程序员，此刻，一个对世，所有人所有所作为一个程序员，此刻，一个对世，所有人所有所作为一个程序员，此刻，一个对世，所有人所有所作为一个程序员，此刻，一个对世界费的语言，所有人所有所有人都是0基础你有什么想你有什么想你有什么想法？",
                    imgs:[],
                    username:"呵呵呵呵",
                    time:"2017/10/13 16:00:00",
                    status:1,
                    userimg:"https://ss3.baidu.com/-rVXeDTa2gU2pMbgoY3K/it/u=111754562,621043109&fm=202&mola=new&crop=v1"
                }
            ]
        },
        dogfood:{
            status:1,
            nowpage:1,
            showpages:100,
            allnum:3,
            list:[
                {
                    id:1,
                    username:"陈南康",
                    phone:13245169874,
                    addressdetail:"山东省济南市历下区甸柳街道燕柳园门内丰巢快递箱",
                    comment:"我家狗狗是国庆前两天被扔在垃圾桶里被我同事捡回来的，三只小狗，后来同事在朋友圈寻找领养者，领走了两只，只剩下这一只没有人领养。同事就找到我，希望我能暂时养一段时间，我本来不想养狗的，感觉这是很大的一份责任，不敢轻易承担，可是和狗狗越相处越割舍不下了，现在我想尽我所能的把它养大。",
                    imgs:[
                        {
                            url:"https://ss2.bdstatic.com/70cFvnSh_Q1YnxGkpoWK1HF6hhy/it/u=114139281,1353799337&fm=27&gp=0.jpg"
                        },
                        {
                            url:"https://ss3.baidu.com/-rVXeDTa2gU2pMbgoY3K/it/u=3252315444,1227221520&fm=202&mola=new&crop=v1"
                        },
                        {
                            url:"https://ss3.baidu.com/-rVXeDTa2gU2pMbgoY3K/it/u=111754562,621043109&fm=202&mola=new&crop=v1"
                        }
                    ],
                    time:"2017/07/23 11:44:21",
                    type:1,
                    status:1,
                    successtimes:1,
                    applytimes:2
                },
                {
                    id:2,
                    username:"陈南康",
                    phone:13245169874,
                    addressdetail:"山东省济南市历下区甸柳街道燕柳园门内丰巢快递箱",
                    comment:"我家狗狗是国庆前两天被扔在垃圾桶里被我同事捡回来的，三只小狗，后来同事在朋友圈寻找领养者，领走了两只，只剩下这一只没有人领养。同事就找到我，希望我能暂时养一段时间，我本来不想养狗的，感觉这是很大的一份责任，不敢轻易承担，可是和狗狗越相处越割舍不下了，现在我想尽我所能的把它养大。",
                    imgs:[
                        {
                            url:"https://ss2.bdstatic.com/70cFvnSh_Q1YnxGkpoWK1HF6hhy/it/u=114139281,1353799337&fm=27&gp=0.jpg",
                            id:1
                        },
                        {
                            url:"https://ss3.baidu.com/-rVXeDTa2gU2pMbgoY3K/it/u=3252315444,1227221520&fm=202&mola=new&crop=v1",
                            id:2
                        },
                        {
                            url:"https://ss3.baidu.com/-rVXeDTa2gU2pMbgoY3K/it/u=111754562,621043109&fm=202&mola=new&crop=v1",
                            id:3
                        }
                    ],
                    time:"2017/07/23 11:44:21",
                    type:2,
                    status:2,
                    successtimes:1,
                    applytimes:2
                },
                {
                    id:3,
                    username:"陈南康",
                    phone:13245169874,
                    addressdetail:"山东省济南市历下区甸柳街道燕柳园门内丰巢快递箱",
                    comment:"我家狗狗是国庆前两天被扔在垃圾桶里被我同事捡回来的，三只小狗，后来同事在朋友圈寻找领养者，领走了两只，只剩下这一只没有人领养。同事就找到我，希望我能暂时养一段时间，我本来不想养狗的，感觉这是很大的一份责任，不敢轻易承担，可是和狗狗越相处越割舍不下了，现在我想尽我所能的把它养大。",
                    imgs:[
                        {
                            url:"https://ss2.bdstatic.com/70cFvnSh_Q1YnxGkpoWK1HF6hhy/it/u=114139281,1353799337&fm=27&gp=0.jpg",
                            id:1
                        },
                        {
                            url:"https://ss3.baidu.com/-rVXeDTa2gU2pMbgoY3K/it/u=3252315444,1227221520&fm=202&mola=new&crop=v1",
                            id:2
                        },
                        {
                            url:"https://ss3.baidu.com/-rVXeDTa2gU2pMbgoY3K/it/u=111754562,621043109&fm=202&mola=new&crop=v1",
                            id:3
                        }
                    ],
                    time:"2017/07/23 11:44:21",
                    type:1,
                    status:3,
                    successtimes:0,
                    applytimes:3
                }
            ]
        },
        friend:{
            status:1,
            nowpage:1,
            showpages:100,
            allnum:3,
            list:[
                {
                    id:1,
                    username:"陈南康",
                    phone:13245169874,
                    addressdetail:"山东省济南市历下区甸柳街道燕柳园门内丰巢快递箱",
                    comment:"我家狗狗是国庆前两天被扔在垃圾桶里被我同事捡回来的，三只小狗，后来同事在朋友圈寻找领养者，领走了两只，只剩下这一只没有人领养。同事就找到我，希望我能暂时养一段时间，我本来不想养狗的，感觉这是很大的一份责任，不敢轻易承担，可是和狗狗越相处越割舍不下了，现在我想尽我所能的把它养大。",
                    imgs:[
                    ],
                    time:"2017/07/23 11:44:21",
                    type:1,
                    status:1,
                    successtimes:1,
                    applytimes:2
                },
                {
                    id:2,
                    username:"陈南康",
                    phone:13245169874,
                    addressdetail:"山东省济南市历下区甸柳街道燕柳园门内丰巢快递箱",
                    comment:"",
                    imgs:[

                    ],
                    time:"2017/07/23 11:44:21",
                    type:2,
                    status:2,
                    successtimes:1,
                    applytimes:2
                },
                {
                    id:3,
                    username:"陈南康",
                    phone:13245169874,
                    addressdetail:"山东省济南市历下区甸柳街道燕柳园门内丰巢快递箱",
                    comment:"",
                    imgs:[

                    ],
                    time:"2017/07/23 11:44:21",
                    type:1,
                    status:3,
                    successtimes:0,
                    applytimes:3
                }
            ]
        }
    },
    computed:{
        Pages:function(){
            return Math.ceil(this[this.type].allnum/this[this.type].showpages);
        },
        MiddlePages:function(){
            if(this.Pages<6){
                return 0;
            }else{
                if(this[this.type].nowpage>3){
                    if(this.Pages-this[this.type].nowpage<2){
                        return this.Pages - 5;
                    }else{
                        return this[this.type].nowpage-3;
                    }
                }else{
                    return 0;
                }
            }
        },
        allselect:function(){
            for(let i =0;i<this[this.type].list.length;i++){
                if(!this[this.type].list[i].select && this[this.type].list[i].status == this[this.type].status){
                    return false;
                }
            }
            return true;
        }
    },
    methods:{
        ChangeType:function(type){
            this.type=type;
            this[this.type].nowpage =1;
            //this.GetData();
        },
        ChangeStatus:function(status){
            this[this.type].status =status;
            this[this.type].nowpage =1;
            //this.GetData();
        },
        GetData:function(){
            var url1;
            if(this.type=='comment'){
                url1='';
            }else if(this.type=='dogfood'){
                url1='';
            }else if(this.type=='friend'){
                url1='';
            }
            $.ajax({
                url:"",
                // type:"POST",
                data:{
                    userid:localStorage.userid,
                    token:localStorage.token,
                    nowpage:this[this.type].nowpage,
                    showpages:this[this.type].showpages,
                    status:this[this.type].status
                },
                beforeSend:function(){
                    $("#wait_img").addClass("active");
                },
                complete:function(){
                    $("#wait_img").removeClass("active");
                },
                timeout:10000,
                //dataType:"json",
                success:function(e){
                    var e ={
                        error:0,
                        list:[
                            {
                            id:1,
                            select:1,
                            comment:"Swift 有类似 Python 的易用性，有比较强行弥补了 Objective-C 哪些不足？ 融合了哪些其他语言的优秀特性？将它和 C#相比各有什么优劣？它会未来的件开发产生什么影响？作为一个程序员，此刻，一个对世界费的语言，所有人所有所作为一个程序员，此刻，一个对世，所有人所有所作为一个程序员，此刻，一个对世，所有人所有所作为一个程序员，此刻，一个对世，所有人所有所作为一个程序员，此刻，一个对世，所有人所有所作为一个程序员，此刻，一个对世，所有人所有所作为一个程序员，此刻，一个对世，所有人所有所作为一个程序员，此刻，一个对世，所有人所有所作为一个程序员，此刻，一个对世界费的语言，所有人所有所有人都是0基础你有什么想你有什么想你有什么想法？",
                            imgs:[
                                {
                                    url:"https://ss3.baidu.com/-rVXeDTa2gU2pMbgoY3K/it/u=331642910,199523927&fm=202&mola=new&crop=v1",
                                    id:1
                                },
                                {
                                    url:"https://ss3.baidu.com/-rVXeDTa2gU2pMbgoY3K/it/u=3252315444,1227221520&fm=202&mola=new&crop=v1",
                                    id:2
                                },
                                {
                                    url:"https://ss3.baidu.com/-rVXeDTa2gU2pMbgoY3K/it/u=111754562,621043109&fm=202&mola=new&crop=v1",
                                    id:3
                                }
                            ],
                            username:"呵呵呵呵",
                            time:"2017/10/13 16:17:04",
                            status:1,
                            userimg:"https://ss3.baidu.com/-rVXeDTa2gU2pMbgoY3K/it/u=331642910,199523927&fm=202&mola=new&crop=v1"
                        },
                            {
                                id:2,
                                select:1,
                                comment:"Swift 有类似 Python 的易用性，有比较强行弥补了 Objective-C 哪些不足？ 融合了哪些其他语言的优秀特性？将它和 C#相比各有什么优劣？它会未来的件开发产生什么影响？作为一个程序员，此刻，一个对世界费的语言，所有人所有所作为一个程序员，此刻，一个对世，所有人所有所作为一个程序员，此刻，一个对世，所有人所有所作为一个程序员，此刻，一个对世，所有人所有所作为一个程序员，此刻，一个对世，所有人所有所作为一个程序员，此刻，一个对世，所有人所有所作为一个程序员，此刻，一个对世，所有人所有所作为一个程序员，此刻，一个对世，所有人所有所作为一个程序员，此刻，一个对世界费的语言，所有人所有所有人都是0基础你有什么想你有什么想你有什么想法？",
                                imgs:[],
                                username:"呵呵呵呵",
                                time:"2017/10/13 16:00:00",
                                status:2,
                                userimg:"https://ss3.baidu.com/-rVXeDTa2gU2pMbgoY3K/it/u=3252315444,1227221520&fm=202&mola=new&crop=v1"
                            },
                            {
                                id:3,
                                select:0,
                                comment:"Swift 有类似 Python 的易用性，有比较强行弥补了 Objective-C 哪些不足？ 融合了哪些其他语言的优秀特性？将它和 C#相比各有什么优劣？它会未来的件开发产生什么影响？作为一个程序员，此刻，一个对世界费的语言，所有人所有所作为一个程序员，此刻，一个对世，所有人所有所作为一个程序员，此刻，一个对世，所有人所有所作为一个程序员，此刻，一个对世，所有人所有所作为一个程序员，此刻，一个对世，所有人所有所作为一个程序员，此刻，一个对世，所有人所有所作为一个程序员，此刻，一个对世，所有人所有所作为一个程序员，此刻，一个对世，所有人所有所作为一个程序员，此刻，一个对世界费的语言，所有人所有所有人都是0基础你有什么想你有什么想你有什么想法？",
                                imgs:[],
                                username:"呵呵呵呵",
                                time:"2017/10/13 16:00:00",
                                status:1,
                                userimg:"https://ss3.baidu.com/-rVXeDTa2gU2pMbgoY3K/it/u=111754562,621043109&fm=202&mola=new&crop=v1"
                            }
                        ],
                        allnum:3
                    }
                    if(Token(e)){
                        body[this.type].list = e.list;
                    }
                },
                error:function(e){
                    console.log(e)
                    alert("网络链接错误!")
                }
            })
        },
        PageMenu:function(){
            $(".paging .menu").addClass("active");
            $(".paging .menu [data-page="+this[this.type].showpages+"]").addClass("active");
        },
        ChangeShowPages:function(){
            event.stopPropagation();
            if(!$(event.target).hasClass("nowpage")){
                $(".paging .menu").removeClass("active");
                $(event.target).addClass("active").siblings().removeClass("active");
                this[this.type].showpages = parseInt($(event.target).attr("data-page"));
                this[this.type].nowpage = 1;
                eval("this.Get"+this.type+"Data()");
            }else{
                $(".paging .menu").removeClass("active");
            }
        },
        NowPage:function(){
            this[this.type].nowpage = parseInt($(event.target).html());
            eval("this.Get"+this.type+"Data()");
        },
        PrePage:function(){
            if(this[this.type].nowpage>1){
                this[this.type].nowpage--;
                eval("this.Get"+this.type+"Data()");
            }
        },
        NextPage:function(){
            if(this[this.type].nowpage<this.Pages){
                this[this.type].nowpage++;
                eval("this.Get"+this.type+"Data()");
            }
        },
        LastPage:function(){
            if(this[this.type].nowpage<this.Pages){
                this[this.type].nowpage = this.Pages;
                eval("this.Get"+this.type+"Data()");
            }
        },
        FirstPage:function(){
            if(this[this.type].nowpage>1){
                this[this.type].nowpage = 1;
                eval("this.Get"+this.type+"Data()");
            }
        },
        Select:function(index){
            if(this[this.type].list[index].select ==1){
                Vue.set(this[this.type].list[index],'select',0);
            }else{
                Vue.set(this[this.type].list[index],'select',1);
            }
        },
        Delete:function(){
            var list=[];
            for(let i=0;i<this[this.type].list.length;i++){
                if(this[this.type].list[i].select){
                    list.push(this[this.type].list[i].id)
                }
            }
            console.log(list)
            if(list.length>0){
                cover2.id = list;
                if(this.type=='comment'){
                    cover2.type=3;
                }else if(this.type=='dogfood'){
                    cover2.type=6;
                }else if(this.type=='friend'){
                    cover2.type=9;
                }
                $("#cover2").addClass("active");
                $("body").addClass("modal-open")
            }

        },
        AllSelect:function(){
            var key;
            if(this.allselect){
                key = true;
            }
            for(let i =0;i<this[this.type].list.length;i++){
                if(key){
                    Vue.set(this[this.type].list[i],'select',false)
                }else{
                    Vue.set(this[this.type].list[i],'select',true)
                }
            }
        },
        ImageCheck:function(index){
            $("#cover").addClass("active");
            cover.imgs = this[this.type].list[index].imgs;
            cover.now = 0;
            cover.$nextTick(function(){
                $("#cover .wrap .content img")[0].onload = function(){
                    cover.ImgWidth();
                }
            })
        },
        Edit:function(index){
            var li = this.comment.list[index];
            edit.commentid = li.id;
            edit.username = li.username;
            edit.time = li.time;
            edit.userimg = li.userimg;
            edit.comment = li.comment;
            //edit.imgs = ["","","","","",""]
            for(let i =0 ;i<edit.imgs.length;i++){
                if(li.imgs[i]){
                    var temp = $.extend(true,{},li.imgs[i])
                    //edit.imgs[i]= li.imgs[i];
                    Vue.set(edit.imgs,i,temp)
                }else{
                    Vue.set(edit.imgs,i,{url:" ",id:""})
                }
            }
            edit.userimgchange = 0;
            edit.index = index;
            //edit.imgs = li.imgs;
        },
        Hide:function(index){
            cover2.type = 1
            cover2.index = index;
            $("#cover2").addClass("active");
            $("body").addClass("modal-open")
        },
        Show:function(index){
            cover2.type = 2;
            cover2.index = index;
            $("#cover2").addClass("active");
            $("body").addClass("modal-open")
        },
        Approve:function(index){
            if(this.type=='dogfood'){
                cover2.type=4;
            }else if(this.type=='friend'){
                cover2.type=7;
            }
            cover2.index = index;
            $("#cover2").addClass("active");
            $("body").addClass("modal-open")
        },
        Refuse:function(index){
            if(this.type=='dogfood'){
                cover2.type=5;
            }else if(this.type=='friend'){
                cover2.type=8;
            }
            cover2.index = index;
            $("#cover2").addClass("active");
            $("body").addClass("modal-open")
        }

    },
    mounted(){
        //this.GetData();
    }
})

var cover = new Vue({
    el:"#cover",
    data:{
        imgs:[],
        now:0
    },
    methods:{
        Next:function(){
            if($(event.target).hasClass("active")){
                var _this = this;
                this.now = this.now+1;
                this.$nextTick(function(){
                    $("#cover .wrap .content img")[0].onload = function(){
                        _this.ImgWidth();
                    }
                })
            }
        },
        Pre:function(){
            if($(event.target).hasClass("active")){
                var _this = this;
                this.now = this.now-1;
                this.$nextTick(function(){
                    $("#cover .wrap .content img")[0].onload = function(){
                        _this.ImgWidth();
                    }
                })
            }
        },
        Close:function(){
            this.$el.setAttribute("class","");
        },
        ImgWidth:function(){
            var imgwidth = $("#cover .wrap .content img").width();
            if(imgwidth>1020){
                $("#cover .wrap").width(imgwidth+60);
            }else{
                $("#cover .wrap").width(1020);
            }
        }
    }
});



var edit = new Vue({
    el:"#edit",
    data:{
        commentid:'',
        username:"",
        time:"",
        userimg:"",
        comment:"",
        imgs:[{url:" ",id:""},{url:" ",id:""},{url:" ",id:""},{url:" ",id:""},{url:" ",id:""},{url:" ",id:""}],
        userimgchange:0,
        index:0
    },
    computed:{
        y:function(){
            if(this.time.split("/")[0]){
                return this.time.split("/")[0]
            }else{
                return '';
            }
        },
        m:function(){
            if(this.time.split("/")[1]){
                return this.time.split("/")[1]
            }else{
                return '';
            }
        },
        d:function(){
            if(this.time.split("/")[2]){
                return this.time.split("/")[2].split(" ")[0]
            }else{
                return '';
            }
        },
        h:function(){
            if(this.time.split(":")[0].split(" ")[1]){
                return this.time.split(":")[0].split(" ")[1]
            }else{
                return '';
            }
        },
        n:function(){
            if(this.time.split(":")[1]){
                return this.time.split(":")[1]
            }else{
                return '';
            }
        },
        s:function(){
            if(this.time.split(":")[2]){
                return this.time.split(":")[2]
            }else{
                return '';
            }
        }
    },
    methods:{
        Change:function(key,index){
            if($(event.target)[0].files.length>0){
                var reader = new FileReader();
                reader.readAsDataURL($(event.target)[0].files[0]);
                reader.onload = function(){
                    if(key =='userimg'){
                        edit.userimg = reader.result;
                        edit.userimgchange = 1
                    }else {
                        Vue.set(edit.imgs[index],'url',reader.result);
                        Vue.set(edit.imgs[index],'change',1);

                    }
                }
            }
        },
        Clear:function(key,index){
            $(event.target).parent(".cover").siblings("input").val('').siblings("img").css("background","transparent");
            if(key =='userimg'){
                edit.userimg ="";
            }else{
                if(edit.imgs[index].id){
                    Vue.set(edit.imgs[index],'change',1);
                }
                Vue.set(edit.imgs[index],'url',' ');
            }
        },
        Cancel:function(){
            $("#edit").click();
        },
        Submit:function(){
            if(!this.username){
                alert("用户昵称不能为空!");
                return;
            }
            if(!this.userimg){
                alert("用户头像不能为空！");
                return;
            }
            if(!this.comment){
                alert("评论不能为空！");
                return;
            }
            var userimg='';
            if(this.userimgchange){
                userimg = $(this.$el).find(".user-img input").get(0).files[0];
                console.log("?")
            }
            var form = new FormData();
            var imgs = $(".imgs-wrap input");
            for(let i =0,j=0;i<this.imgs.length;i++){
                if(this.imgs[i].change ==1){
                    if(this.imgs[i].id){
                        if(imgs.eq(i).get(0).files[0]){
                            form.append('img',imgs.eq(i).get(0).files[0]);
                        }else{
                            form.append('img','');
                        }
                        form.append('imgids',this.imgs[i].id)
                    }else{
                        form.append("imgadd",imgs.eq(i).get(0).files[0]);
                    }
                }
            }
            form.append('userimg',userimg);
            form.append('username',this.username);
            form.append('userid',localStorage.userid);
            form.append('token',localStorage.token);
            form.append('commentid',this.commentid);
            form.append('comment',this.comment);
            form.append('time',this.time);
            $.ajax({
                url:"",
                // type:"POST",
                data:form,
                dataType:"json",
                processData:false,
                contentType:false,
                success:function(e){
                    if(Token(e)){
                        body.comment.list[edit.index].username = edit.username;
                        body.comment.list[edit.index].userimg = edit.userimg;
                        body.comment.list[edit.index].comment = edit.comment;
                        body.comment.list[edit.index].time = edit.time;
                        $("#edit").click();
                        var imgs=[];
                        for(let i =0;i<edit.imgs.length;i++){
                            if(edit.imgs[i].id && edit.imgs[i].url){
                                imgs.push(edit.imgs[i]);
                            }
                        }
                        if(e.imgs){
                            for(let i =0;i<e.imgs.length;i++){
                                imgs.push(e.imgs[i]);
                            }
                        }

                        Vue.set(body.comment.list[edit.index],'imgs',imgs)
                    }
                }
            })

        }
    }
});

$(function(){
    $("#edit .user-info .time").on("click",function(){
        var data={
            that:$(this),
            position:"bottom",
            y:$(this).attr("y"),
            m:$(this).attr("m"),
            d:$(this).attr("d"),
            h:$(this).attr("h"),
            n:$(this).attr("n"),
            s:$(this).attr("s"),
            type:'second'
        };
        TimeShow(data);
    })
});
$("#edit .user-info .time").on("focus",function(){
    edit.time = $(this).val();
});



$(window).on("click",function(){
    if($("#select-date").hasClass("active")){
        $("#select-date").slideUp(0).removeClass("active");
        $("[time=active]").attr("time","");
    }
});


var cover2 = new Vue({
    el:"#cover2",
    data:{
        type:4,
        index:0,
        id:0
    },
    methods:{
        Confirm:function(){
            var url;
            var data ={
                userid:localStorage.userid,
                token:localStorage.token
            };
            if(this.type==1||this.type==4||this.type==7){
                data.type=1;
            }else if(this.type==2||this.type==5||this.type==8){
                data.type=2;
            }else if(this.type==3||this.type==6||this.type==9){
                data.type=3
            }
            data.id = this.id;
            if(this.type<=3){
                url='' ;  //评论
            }else if(this.type<=6||this.type>3){
                url='';  //狗粮
            }else if(this.type<=9||this.type>6){
                url='';   //朋友
            }
            $.ajax({
                url:url,
                // type:"POST",
                data:data,
                //dataType:'json',
                success:function(e){
                    if(Token(e)){
                        if(cover2.type==1){
                            Vue.set(body.comment.list[cover2.index],'status',2);
                        }else if(cover2.type==2){
                            Vue.set(body.comment.list[cover2.index],'status',1);
                        }else if (cover2.type==3){
                            for(let i=0;i<body.comment.list.length;i++){
                                for(let j =0;j<cover2.id.length;j++){
                                    if(body.comment.list[i].id ==cover2.id[j]){
                                        body.comment.list.splice(i,1);
                                        i--;
                                        break;
                                    }
                                }
                            }
                        }else if(cover2.type==4){
                            Vue.set(body.dogfood.list[cover2.index],'status',2);
                        }else if(cover2.type==5){
                            Vue.set(body.dogfood.list[cover2.index],'status',3);
                        }else if (cover2.type==6){
                            for(let i=0;i<body.dogfood.list.length;i++){
                                for(let j =0;j<cover2.id.length;j++){
                                    if(body.dogfood.list[i].id ==cover2.id[j]){
                                        body.dogfood.list.splice(i,1);
                                        i--;
                                        break;
                                    }
                                }
                            }
                        }else if(cover2.type==7){
                            Vue.set(body.friend.list[cover2.index],'status',2);
                        }else if(cover2.type==8){
                            Vue.set(body.friend.list[cover2.index],'status',3);
                        }else if (cover2.type==9){
                            for(let i=0;i<body.friend.list.length;i++){
                                for(let j =0;j<cover2.id.length;j++){
                                    if(body.friend.list[i].id ==cover2.id[j]){
                                        body.friend.list.splice(i,1);
                                        i--;
                                        break;
                                    }
                                }
                            }
                        }
                    }
                    cover2.Cancel();
                }
            })
        },
        Cancel:function(){
            $("#cover2").removeClass("active");
            $("body").removeClass("modal-open")
        }
    }

})
